    # 奖励惩罚系统开发文档

## 项目概述

本项目旨在开发一个奖励惩罚管理系统，支持管理员和普通成员两类用户，分别具有不同的功能权限。系统主要包括奖励惩罚模块和成员上下级关系模块。

## 技术栈

- **开发框架**: Spring Boot
- **持久层框架**: MyBatis-Plus
- **数据库**: MySQL
- **前端**: 可选（例如 React, Vue）
- **接口文档**: Swagger
- **版本管理**: Git
- **消息通知**: 可选（例如 Redis, 邮件服务）

## 主要功能模块

### 1. 奖励惩罚模块

#### 1.1 用户管理

- **角色**: 管理员、普通成员
- 功能:
  - [x] 登录（需验证码）
  - [ ] 普通成员找回密码、也支持管理员协助修改密码

#### 1.2 奖励惩罚记录管理

- **管理员功能**:

  - [x] 查看所有成员信息（姓名，学号，年级，组别，担任角色）

  - [x] 查看和操作所有成员的奖励惩罚记录（姓名，学号，年级，组别，担任角色，奖惩类型，奖惩类别，奖惩日期，奖惩内容，奖惩金额，奖惩原因，奖惩备注，是否撤销，撤销日期，撤销原因，撤销备注，操作人，最近一次更新时间，操作）
    - **分页展示**（每页展示数量有10，20，50，100，默认是10）
    - 奖惩类型：奖励、惩罚
    - 操作：撤销、编辑、删除
    
  - [x] 模糊查询奖励惩罚记录
    - 分页展示
    - 根据姓名，学号，年级，组别，担任角色进行模糊匹配查询
    
  - [x] 管理员与普通成员均可支持按奖惩类型查看奖惩记录，若选择奖励只显示奖励的记录，若选择惩罚只显示惩罚的记录，同时需兼容模糊匹配搜索
    - 分页展示
    - 根据奖惩类型，模糊查询记录

  - [x] 添加、修改成员的奖励惩罚记录（管理员选择奖励时只展示奖励类型的类别，选择惩罚时只展示惩罚类型的类别，可支持上传附件）

    - 成员姓名、奖惩类型、奖惩类别、奖惩日期、奖惩内容、奖惩原因不能为空
    - 上传附件格式支持：xls、ppt、docx、xlsx、 pptx、pdf

  - [x] 删除任意成员记录，支持批量删除

  - [ ] 查看和管理撤销申请记录

    - 分页展示

  - [ ] 撤销某一成员奖惩记录，需填写撤销原因、备注

    - 撤销日期可由后台自动获取当前时间进行设置

  - [x] 查看奖惩类别的数据，可以按奖惩类型查看（类别名称，奖惩类型，是否启用，类别说明，操作）

    - 分页展示

  - [x] 启用或禁用某个奖惩类别，禁用后在添加奖惩记录的页面中不显示该奖惩类别 ，启动后恢复

  - [x] 添加或修改某个奖惩类别

  - [ ] 删除某个奖惩类别，但需要为已有该奖惩类别的奖惩记录选择一个替代的奖惩类别，替换后相应的奖惩记录也会同步更新

    - （困难）

  - [ ] 管理员与普通成员均可导出任意的奖惩记录，生成excel文件

  - [ ] 可以批量导入普通成员的奖惩记录，导入excel文件，进行校验，分别显示出校验成功和校验失败的记录，需分页展示，管理员可对校验成功的记录进行保存，校验失败的记录可不作处理也可删除，同时管理员可对任意校验成功或校验失败的记录进行导出，生成excel文件；可支持下载excel模板。 

    - excel模板：成员姓名，学号，奖惩日期，奖惩类型，奖惩类别，奖惩内容，奖惩原因，奖惩金额，奖惩备注
    - 校验逻辑：成员姓名，奖惩日期，奖惩类型，奖惩类别，奖惩内容，奖惩原因不能为空；若遇到重名成员请补充学号进行校验，奖惩类型请输入奖励或惩罚，奖惩类别需校验系统是否有该类别
    - （困难）

    

- **普通成员功能**:

  - [ ] 只能查看自己的奖励惩罚记录（姓名，奖惩状态，奖惩类型，奖惩类别，奖惩日期，奖惩内容，奖惩金额，奖惩原因，奖惩备注，附件说明）
    - **分页展示**
  - [ ] 管理员与普通成员均可支持按奖惩类型查看奖惩记录，若选择奖励只显示奖励的记录，若选择惩罚只显示惩罚的记录，同时需兼容模糊匹配搜索
    - 分页展示
    - 根据奖惩类型，模糊查询记录
  - [ ] 申请撤销某一奖惩记录
  - [ ] 点击附件可下载附件
  - [ ] 管理员与普通成员均可导出任意的奖惩记录，生成excel文件

#### 1.3 数据导入导出

- 管理员功能:
  - [ ] 导出任意奖惩记录为 Excel 文件
  - [ ] 批量导入奖惩记录（校验、保存、删除、导出）
  - [ ] 下载 Excel 模板

### 2. 成员上下级关系模块

- **普通成员功能**:
  - [ ] 查看自己的上下级关系
- **管理员功能**:
  - [ ] 添加或删除成员的上下级关系（注意上下级逻辑）
    - 注意添加上级的时候该上级不能属于该成员的下级，添加下级的时候同理；一个成员的下级可以有多个，但上级只能有一个。 

## 进阶需求（可选）

1. **消息通知**:（系统通知或邮箱通知）
   - [ ] 普通成员申请撤销后通知管理员
   - [ ] 管理员操作奖惩记录后通知普通成员
2. **管理员自行选定撤销日期**:
   - [ ] 撤销记录到达规定日期后自动更新状态
3. **分布式部署**:
   - [ ] 使用 Nginx 进行反向代理
   - [ ] 项目部署到多个服务器或虚拟机上
4. **权限校验**
   - [x] 对每个接口都进行权限校验

## 可以考虑

1. JWT进行身份校验，弃用session
2. @Valid或者@Validated配合全局异常处理器实现优雅的参数校验
3. redis实现简单的消息队列

## 开发规范

### 1. API 设计

- 使用 Swagger 生成接口文档
- 规范的请求参数和响应数据格式
- 接口需进行权限校验

### 2. 数据库设计

- 用户表
- 奖励惩罚记录表
- 奖惩类别表
- 上下级关系表

### 3. 项目管理

- 使用 Git 进行版本控制
- 提交代码前进行单元测试和集成测试

## 开发步骤

1. **环境搭建**:
   - 配置 Spring Boot 项目
   - 设置数据库和 MyBatis-Plus
   - 配置 Swagger 生成接口文档
2. **功能实现**:
   - 实现用户登录和权限控制
   - 开发奖励惩罚记录管理功能
   - 实现成员上下级关系管理
   - 实现数据导入导出功能
3. **测试与部署**:
   - 编写单元测试和集成测试
   - 部署到服务器或虚拟机
   - 配置 Nginx 反向代理（如适用）
4. **文档编写与维护**:
   - 使用 Swagger 生成接口文档
   - 编写用户手册和开发文档